# laravel-10-astro
Laravel10 采集每日星座运势

## 说明
    随手写的一个脚本, 爬取一下 'https://www.1212.com/luck' 星座的数据, 同时试一下laravel 的 'Process\Pool' 功能

## 环境需求
* Composer
* PHP >= 8.1
* Mysql 8.0+

## 使用

#### 1. 采集入库

```shell
$ php artisan astro-storage
开始采集星座运势数据...
 12/12 [============================] 100%
20230714星座运势采集入库完成！

开始采集星座运势数据...
 12/12 [============================] 100%
20230715星座运势采集入库完成！
```

#### 2. 星座索引

```php
protected $astros = [
    0 => "白羊座",
    1 => "金牛座",
    2 => "双子座",
    3 => "巨蟹座",
    4 => "狮子座",
    5 => "处女座",
    6 => "天秤座",
    7 => "天蝎座",
    8 => "射手座",
    9 => "摩羯座",
    10 => "水瓶座",
    11 => "双鱼座"
];
```

#### 3. 查询

查询方式 `php artisan astro:query <索引ID>`
```shell
$ php artisan astro-query 7
日期: 20230714
星座: 天蝎座
综合运势: 你关注财务领域，某些房产投资卖买交易的信息或许是你很感兴趣的，不过这类消息大多真假参半，还需要你理智分辨。有伴的天蝎今天也容易为对方花钱，适当的物质付出可以增加你们的亲密度。
爱情运势: 单身的不要耍小心机，多一点真诚更能让别人了解你。已有伴者则不要套路自己的爱人，坦白真诚地相处吧。
事业运势: 你在处理问题的时候容易感情用事，而且过于注重结果，乃至于行事会有点急躁，容易被牵着鼻子走。
财富运势: 会有一些陆陆续续到账的收益，不过你会有一部分兴趣爱好的投入，所以基本上没有剩余多少，但钱也够花。
健康运势: 需要保持环境的干净整洁，该收拾整理就整理一下，不要堆积杂物，也要及时清理家宅里外的积水，杜绝蚊虫滋生。
速配星座: 白羊座
提防星座: 处女座
幸运颜色: 红色
幸运数字: 7

```

#### 4. 每日自动采集

在app/Console/Kernel.php中加入
```php
$schedule->command('astro-storage')->dailyAt('02:00');
```
